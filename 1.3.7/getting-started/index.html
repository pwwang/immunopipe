<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Geting started - immunopipe</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Geting started";
        var mkdocs_page_input_path = "getting-started.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.configure({ ignoreUnescapedHTML: true }); hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../rtd-logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="nav-scrollable-wrapper">
      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../introduction/">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Geting started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#download-and-prepare-the-data">Download and prepare the data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#prepare-the-configuration-file">Prepare the configuration file</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-the-pipeline">Run the pipeline</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#check-the-results">Check the results</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#next-steps">Next steps</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../gallery/">Gallery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../running/">Running the pipeline</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../preparing-input/">Preparing the input</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../configurations/">Configurations</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Processes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SampleInfo/">SampleInfo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/ImmunarchLoading/">ImmunarchLoading</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SeuratPreparing/">SeuratPreparing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SeuratClusteringOfAllCells/">SeuratClusteringOfAllCells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/ClusterMarkersOfAllCells/">ClusterMarkersOfAllCells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/TopExpressingGenesOfAllCells/">TopExpressingGenesOfAllCells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/TCellSelection/">TCellSelection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/ModuleScoreCalculator/">ModuleScoreCalculator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SeuratClustering/">SeuratClustering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SeuratMap2Ref/">SeuratMap2Ref</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/CellTypeAnnotation/">CellTypeAnnotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SeuratSubClustering/">SeuratSubClustering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/TCRClustering/">TCRClustering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/TCRClusterStats/">TCRClusterStats</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/IntegratingTCRClusters/">IntegratingTCRClusters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/ClusterMarkers/">ClusterMarkers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/TopExpressingGenes/">TopExpressingGenes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/Immunarch/">Immunarch</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/TESSA/">TESSA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/IntegratingTCR/">IntegratingTCR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/SeuratClusterStats/">SeuratClusterStats</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/RadarPlots/">RadarPlots</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/CloneResidency/">CloneResidency</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/ScFGSEA/">ScFGSEA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/CellsDistribution/">CellsDistribution</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MarkersFinder/">MarkersFinder</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetaMarkers/">MetaMarkers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/CDR3AAPhyschem/">CDR3AAPhyschem</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Metabolic Landscape Analysis</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/ScrnaMetabolicLandscape/">Introduction & Group Arguments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetabolicInput/">MetabolicInput</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetabolicExprImpution/">MetabolicExprImpution</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetabolicFeatures/">MetabolicFeatures</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetabolicFeaturesIntraSubset/">MetabolicFeaturesIntraSubset</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetabolicPathwayActivity/">MetabolicPathwayActivity</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../processes/MetabolicPathwayHeterogeneity/">MetabolicPathwayHeterogeneity</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Change log</a>
                </li>
              </ul>
      </div>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">immunopipe</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Geting started</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/pwwang/immunopipe/blob/dev/docs/getting-started.md">Edit on pwwang/immunopipe</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>You can find the nessary files and source code of this tutorial in the <a href="https://github.com/pwwang/immunopipe-example">example repository</a>.</p>
<p>In this tutorial we will show you how to run the immunopipe pipeline on a small dataset of 3 patients with paired tumor and normal samples. The dataset is part of the data used in the publications below:</p>
<ul>
<li><a href="https://www.ncbi.nlm.nih.gov/pubmed/32103181">Wu TD, Madireddi S, de Almeida PE, Banchereau R et al. Peripheral T cell expansion predicts tumour infiltration and clinical response. Nature 2020 Mar;579(7798):274-278.</a></li>
<li><a href="https://www.ncbi.nlm.nih.gov/pubmed/35263569">Banta KL, Xu X, Chitre AS, Au-Yeung A et al. Mechanistic convergence of the TIGIT and PD-1 inhibitory pathways necessitates co-blockade to optimize anti-tumor CD8+ T cell responses. Immunity 2022 Mar 8;55(3):512-526.e9.</a></li>
</ul>
<p>We are using a small subset of the data to make the tutorial run faster. The full dataset can be downloaded from Gene Expression Omnibus (GEO) <a href="https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE139555">GSE139555</a>.</p>
<h3 id="download-and-prepare-the-data">Download and prepare the data<a class="headerlink" href="#download-and-prepare-the-data" title="Permanent link">&para;</a></h3>
<p>The data can be downloaded and prepared by running the following commands:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Clone the example repository</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/pwwang/immunopipe-example.git

<span class="c1"># Enter the example directory</span>
<span class="nb">cd</span><span class="w"> </span>immunopipe-example

<span class="c1"># Download and prepare the data</span>
bash<span class="w"> </span>prepare-data.sh
<span class="c1"># The data from GSE139555 (https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE139555)</span>
<span class="c1"># will be downloaded and extracted into:</span>
<span class="c1">#</span>
<span class="c1">#   ./prepared-data/LT1</span>
<span class="c1">#   ./prepared-data/LN2</span>
<span class="c1">#   ...</span>
<span class="c1">#</span>
<span class="c1"># Only first 6 samples (LN, LT) are used.</span>
</code></pre></div>
<p>You may also check other files in the <code>data/</code> directory, especially the <code>samples.txt</code> file, which contains the sample information for the dataset we prepared above.</p>
<h3 id="prepare-the-configuration-file">Prepare the configuration file<a class="headerlink" href="#prepare-the-configuration-file" title="Permanent link">&para;</a></h3>
<p>To run the pipeline, we need to prepare a configuration file (recommended) or pass the arguments directly via command line. Here we will use the configuration file. See also <a href="../configurations/">Configurations</a> for more details.</p>
<p>As explained in the <a href="../configurations/">Configurations</a> page, we can provide a configuration file with <a href="../configurations/#minimal-configurations">a minimal set of configuration items</a> to get the pipeline running. The only required configuration item is the input file for the <a href="../processes/SampleInfo/"><code>SampleInfo</code></a> process. However, here we want to give the pipeline a different name and output directory to distinguish it from other runs with a different set of configurations.</p>
<p>The configuration file shall be in the <a href="https://toml.io/en/">TOML</a> format. We can create a file named <code>ImmunopipeMinimal.config.toml</code> with the following content:</p>
<div class="highlight"><pre><span></span><code><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ImmunopipeMinimal&quot;</span>
<span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;minimal&quot;</span>

<span class="k">[SampleInfo.in]</span>
<span class="n">infile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;data/samples.txt&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<h3 id="run-the-pipeline">Run the pipeline<a class="headerlink" href="#run-the-pipeline" title="Permanent link">&para;</a></h3>
<p>The easiest way to run the pipeline is to run it within the docker container. We can use the following command to run the pipeline with the configuration file we just created:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Using docker</label><label for="__tabbed_1_2">Using singularity</label><label for="__tabbed_1_3">Using apptainer</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--rm<span class="w"> </span>-w<span class="w"> </span>/workdir<span class="w"> </span>-v<span class="w"> </span>.:/workdir<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>justold/immunopipe:master<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>@ImmunopipeMinimal.config.toml
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span>run<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--pwd<span class="w"> </span>/workdir<span class="w"> </span>-B<span class="w"> </span>.:/workdir<span class="w"> </span>-c<span class="w"> </span>-e<span class="w"> </span>-w<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>docker://justold/immunopipe:master<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>@ImmunopipeMinimal.config.toml
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>apptainer<span class="w"> </span>run<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--pwd<span class="w"> </span>/workdir<span class="w"> </span>-B<span class="w"> </span>.:/workdir<span class="w"> </span>-c<span class="w"> </span>-e<span class="w"> </span>-w<span class="w"> </span>--unsquash<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>docker://justold/immunopipe:master<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>@ImmunopipeMinimal.config.toml
</code></pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Both the <code>docker</code>, <code>singularity</code> and <code>apptainer</code> commands map the current directory (<code>.</code>) to the <code>/workdir</code> directory in the container. To get the detailed directory structure in the container, please refer to the <a href="../installation/#the-directory-structure-in-the-container">The directory structure in the container</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you want to install and run the pipeline without docker, please refer to the <a href="../installation/">Installation</a> and <a href="../running/">Running the pipeline</a> pages for more details.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You need at least 16GB of memory to run the pipeline with the example dataset and minimal configuration.</p>
<p>You may also need to decrease <code>ncores</code> of some processes to avoid running out of memory. For example:</p>
<div class="highlight"><pre><span></span><code>[SeuratClusteringOfAllCells.envs]
<span class="gd">- ncores = 16</span>
<span class="gi">+ ncores = 4</span>
</code></pre></div>
</div>
<h3 id="check-the-results">Check the results<a class="headerlink" href="#check-the-results" title="Permanent link">&para;</a></h3>
<p>With that "minimal" configuration file, only a subset of the processes will be run. See also <a href="../configurations/#enablingdisabling-processes">Enabling/Disabling processes</a>. The results will be saved in the <code>minimal</code> directory. You can also check the reports at <code>minimal/REPORTS/index.html</code> with a web browser.</p>
<p>You can also visit the following link to see the reports of the pipeline we just ran:</p>
<p><a href="http://imp.pwwang.com/minimal/REPORTS/index.html">http://imp.pwwang.com/minimal/REPORTS/index.html</a></p>
<h3 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h3>
<p>You may read through this documentation to learn more about the pipeline and how to configure it. There is also a configuration file, named <a href="https://github.com/pwwang/immunopipe-example/blob/master/Immunopipe.config.toml"><code>Immunopipe.config.toml</code></a> in the example repository, with more processes enabled. You can use it to run the pipeline with the dataset prepared above. Check out the following link for the reports:</p>
<p><a href="http://imp.pwwang.com/output/REPORTS/index.html">http://imp.pwwang.com/output/REPORTS/index.html</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The results provided by this example configuration files are for demonstration purpose only. They are not intended to be used for any scientific analysis.</p>
</div>
<p>You may also want to try other routes of the pipeline with the prepared data. These routes are defined in:</p>
<ul>
<li><code>ImmunopipeMinimalNoTCR.config.toml</code>: The configuration for minimal analyses without scTCR-seq data.</li>
<li><code>ImmunopipeMinimalSupervised.config.toml</code>: The configuration for minimal analyses with supervised clustering of T cells.</li>
<li><code>ImmunopipeNoTCR.config.toml</code>: The configuration for full analyses without scTCR-seq data.</li>
<li><code>ImmunopipeNoTCRWithSelection.config.toml</code>: The configuration for full analyses without scTCR-seq data, but with selection of T cells.</li>
<li><code>ImmunopipeSupervised.config.toml</code>: The configuration for full analyses with supervised clustering of T cells.</li>
</ul>
<p>Also check out the <a href="../gallery/">gallery</a> for more real-world examples.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../installation/" class="btn btn-neutral float-left" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../gallery/" class="btn btn-neutral float-right" title="Gallery">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div class="footer-notes">
    
    Version: <div id="mike-versions"></div>
    <div class="footer-sep"></div>
    <a href="https://github.com/pwwang/immunopipe" title="Open repository in GitHub">Github Repo</a>
    <div class="footer-sep"></div>Built with <a href="https://www.mkdocs.org/">MkDocs</a> using theme <a href="https://github.com/pwwang/mkdocs-rtd">mkdocs-rtd</a>.
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../installation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../gallery/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script src="../js/version-select.js"></script>
      <script src="../assets/script.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
