
[RUNNING_OPTIONS.LOCAL]
# Which option to use for saving the config file
configfile = "configfile"
editable = true
allow_run = true
order = -1
desc = "Compose a command to run the pipeline locally"
command = "immunopipe @${configfile}"

[RUNNING_OPTIONS.LOCAL.value.configfile]
desc = "The configuration file for the pipeline, typically generated by this wizard\n"
required = true
value = "{{name}}.config.toml"
placeholder = "{{name}}.config.toml"

[RUNNING_OPTIONS.SINGULARITY]
# Which option to use for saving the config file
configfile = "configfile"
editable = true
allow_run = false
order = 9
desc = """
Compose a command to the pipeline using singularity.

Note that if pipen-board (the web interface) is running via singularity, you should choose LOCAL instead, if you want to run the pipeline in the same container.

Otherwise, you can copy the command and run it in the terminal.
"""
command = "singularity run --pwd /workdir -B .:/workdir -c -e -w docker://justold/immunopipe:${tag} @${configfile}"


[RUNNING_OPTIONS.SINGULARITY.value.configfile]
desc = "The configuration file for the pipeline, typically generated by this wizard\n"
required = true
value = "{{name}}.immunopipe.toml"
placeholder = "{{name}}.immunopipe.toml"


[RUNNING_OPTIONS.SINGULARITY.value.tag]
desc = "The tag of the docker image on dockerhub.\nYou can find the available tags at https://hub.docker.com/r/justold/immunopipe/tags"
required = true
value = "master"
placeholder = "master"

[RUNNING_OPTIONS.APPTAINER]
# Which option to use for saving the config file
configfile = "configfile"
editable = true
allow_run = false
order = 8
desc = """
Compose a command to the pipeline using apptainer.

Note that if pipen-board (the web interface) is running via apptainer, you should choose LOCAL instead, if you want to run the pipeline in the same container.

Otherwise, you can copy the command and run it in the terminal.
"""
command = "apptainer run --pwd /workdir -B .:/workdir -c -e --unsquash docker://justold/immunopipe:${tag} @${configfile}"


[RUNNING_OPTIONS.APPTAINER.value.configfile]
desc = "The configuration file for the pipeline, typically generated by this wizard\n"
required = true
value = "{{name}}.immunopipe.toml"
placeholder = "{{name}}.immunopipe.toml"


[RUNNING_OPTIONS.APPTAINER.value.tag]
desc = "The tag of the docker image on dockerhub.\nYou can find the available tags at https://hub.docker.com/r/justold/immunopipe/tags"
required = true
value = "master"
placeholder = "master"

[RUNNING_OPTIONS.DOCKER]
# Which option to use for saving the config file
configfile = "configfile"
editable = true
allow_run = false
desc = """
Compose a command to the pipeline using docker.

Note that if pipen-board (the web interface) is running via docker, you should choose LOCAL instead, if you want to run the pipeline in the same container.

Otherwise, you can copy the command and run it in the terminal.
"""
command = "docker run -p 18521:18521 --rm -w /workdir -v .:/workdir justold/immunopipe:${tag} @${configfile}"


[RUNNING_OPTIONS.DOCKER.value.configfile]
desc = "The configuration file for the pipeline, typically generated by this wizard\n"
required = true
value = "{{name}}.immunopipe.toml"
placeholder = "{{name}}.immunopipe.toml"


[RUNNING_OPTIONS.DOCKER.value.tag]
desc = "The tag of the docker image on dockerhub.\nYou can find the available tags at https://hub.docker.com/r/justold/immunopipe/tags"
required = true
value = "master"
placeholder = "master"
