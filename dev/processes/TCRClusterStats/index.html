<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>TCRClusterStats - immunopipe</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "TCRClusterStats";
        var mkdocs_page_input_path = "processes/TCRClusterStats.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.configure({ ignoreUnescapedHTML: true }); hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../rtd-logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="nav-scrollable-wrapper">
      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../introduction/">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../getting-started/">Geting started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../gallery/">Gallery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../running/">Running the pipeline</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../preparing-input/">Preparing the input</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../configurations/">Configurations</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Processes</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../SampleInfo/">SampleInfo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ImmunarchLoading/">ImmunarchLoading</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SeuratPreparing/">SeuratPreparing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SeuratClusteringOfAllCells/">SeuratClusteringOfAllCells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ClusterMarkersOfAllCells/">ClusterMarkersOfAllCells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TopExpressingGenesOfAllCells/">TopExpressingGenesOfAllCells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TCellSelection/">TCellSelection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ModuleScoreCalculator/">ModuleScoreCalculator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SeuratClustering/">SeuratClustering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SeuratMap2Ref/">SeuratMap2Ref</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CellTypeAnnotation/">CellTypeAnnotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SeuratSubClustering/">SeuratSubClustering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TCRClustering/">TCRClustering</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">TCRClusterStats</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#input">Input</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#output">Output</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment Variables</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cluster-size">Cluster size</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shared-clusters">Shared clusters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sample-diversity">Sample diversity</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../IntegratingTCRClusters/">IntegratingTCRClusters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ClusterMarkers/">ClusterMarkers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TopExpressingGenes/">TopExpressingGenes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Immunarch/">Immunarch</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../TESSA/">TESSA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../IntegratingTCR/">IntegratingTCR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SeuratClusterStats/">SeuratClusterStats</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../RadarPlots/">RadarPlots</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CloneResidency/">CloneResidency</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ScFGSEA/">ScFGSEA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CellsDistribution/">CellsDistribution</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MarkersFinder/">MarkersFinder</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetaMarkers/">MetaMarkers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CDR3AAPhyschem/">CDR3AAPhyschem</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CellCellCommunication/">CellCellCommunication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CellCellCommunicationPlots/">CellCellCommunicationPlots</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Metabolic Landscape Analysis</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ScrnaMetabolicLandscape/">Introduction & Group Arguments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetabolicInput/">MetabolicInput</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetabolicExprImpution/">MetabolicExprImpution</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetabolicFeatures/">MetabolicFeatures</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetabolicFeaturesIntraSubset/">MetabolicFeaturesIntraSubset</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetabolicPathwayActivity/">MetabolicPathwayActivity</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MetabolicPathwayHeterogeneity/">MetabolicPathwayHeterogeneity</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG/">Change log</a>
                </li>
              </ul>
      </div>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">immunopipe</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Processes</li>
      <li class="breadcrumb-item active">TCRClusterStats</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/pwwang/immunopipe/blob/dev/docs/processes/TCRClusterStats.md">Edit on pwwang/immunopipe</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="tcrclusterstats">TCRClusterStats<a class="headerlink" href="#tcrclusterstats" title="Permanent link">&para;</a></h2>
<p>Statistics of TCR clusters, generated by <code>TCRClustering</code>.</p>
<p>The statistics include</p>
<ul>
<li>The number of cells in each cluster (cluster size)</li>
<li>Sample diversity using TCR clusters instead of TCR clones</li>
<li>Shared TCR clusters between samples</li>
</ul>
<h3 id="input">Input<a class="headerlink" href="#input" title="Permanent link">&para;</a></h3>
<ul>
<li><code>immfile</code>:
    The immunarch object with TCR clusters attached</li>
</ul>
<h3 id="output">Output<a class="headerlink" href="#output" title="Permanent link">&para;</a></h3>
<ul>
<li><code>outdir</code>: <em>Default: <code>{{in.immfile | stem}}.tcrclusters_stats</code></em>. <br />
    The output directory containing the stats and reports</li>
</ul>
<h3 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<ul>
<li><code>cluster_size</code> <em>(<code>ns</code>)</em>:
    The distribution of size of each cluster.<br /><ul>
<li><code>by</code>: <em>Default: <code>Sample</code></em>. <br />
    The variables (column names) used to fill the histogram.<br />
    Only a single column is supported.<br /></li>
<li><code>devpars</code> <em>(<code>ns</code>)</em>:
    The parameters for the plotting device.<br /><ul>
<li><code>width</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>1000</code></em>. <br />
    The width of the device</li>
<li><code>height</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>900</code></em>. <br />
    The height of the device</li>
<li><code>res</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>100</code></em>. <br />
    The resolution of the device</li>
</ul>
</li>
<li><code>cases</code> <em>(<code>type=json</code>)</em>: <em>Default: <code>{}</code></em>. <br />
    If you have multiple cases, you can use this
    argument to specify them. The keys will be the names of the
    cases. The values will be passed to the corresponding arguments
    above. If any of these arguments are not specified, the values
    in <code>envs.cluster_size</code> will be used. If NO cases are
    specified, the default case will be added, with the name
    <code>DEFAULT</code>.<br /></li>
</ul>
</li>
<li><code>shared_clusters</code> <em>(<code>ns</code>)</em>:
    Stats about shared TCR clusters<ul>
<li><code>numbers_on_heatmap</code> <em>(<code>flag</code>)</em>: <em>Default: <code>True</code></em>. <br />
    Whether to show the
    numbers on the heatmap.<br /></li>
<li><code>heatmap_meta</code> <em>(<code>list</code>)</em>: <em>Default: <code>[]</code></em>. <br />
    The columns of metadata to show on the
    heatmap.<br /></li>
<li><code>cluster_rows</code> <em>(<code>flag</code>)</em>: <em>Default: <code>True</code></em>. <br />
    Whether to cluster the rows on the heatmap.<br /></li>
<li><code>sample_order</code>:
    The order of the samples on the heatmap.<br />
    Either a string separated by <code>,</code> or a list of sample names.<br />
    This only works for columns if <code>cluster_rows</code> is <code>True</code>.<br /></li>
<li><code>grouping</code>:
    The groups to investigate the shared clusters.<br />
    If specified, venn diagrams will be drawn instead of heatmaps.<br />
    In such case, <code>numbers_on_heatmap</code> and <code>heatmap_meta</code> will be
    ignored.<br /></li>
<li><code>devpars</code> <em>(<code>ns</code>)</em>:
    The parameters for the plotting device.<br /><ul>
<li><code>width</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>1000</code></em>. <br />
    The width of the device</li>
<li><code>height</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>1000</code></em>. <br />
    The height of the device</li>
<li><code>res</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>100</code></em>. <br />
    The resolution of the device</li>
</ul>
</li>
<li><code>cases</code> <em>(<code>type=json</code>)</em>: <em>Default: <code>{}</code></em>. <br />
    If you have multiple cases, you can use this
    argument to specify them. The keys will be the names of the
    cases. The values will be passed to the corresponding arguments
    above. If any of these arguments are not specified, the values
    in <code>envs.shared_clusters</code> will be used. If NO cases are
    specified, the default case will be added, with the name
    <code>DEFAULT</code>.<br /></li>
</ul>
</li>
<li><code>sample_diversity</code> <em>(<code>ns</code>)</em>:
    Sample diversity using TCR clusters instead of
    clones.<br /><ul>
<li><code>by</code>:
    The variables (column names) to group samples.<br />
    Multiple columns should be separated by <code>,</code>.<br /></li>
<li><code>method</code> <em>(<code>choice</code>)</em>: <em>Default: <code>gini</code></em>. <br />
    The method to calculate diversity.<br /><ul>
<li><code>gini</code>:
    The Gini coefficient.<br />
    It measures the inequality among values of a frequency
    distribution (for example levels of income).<br /></li>
<li><code>gini.simp</code>:
    The Gini-Simpson index.<br />
    It is the probability of interspecific encounter, i.e.,
    probability that two entities represent different types.<br /></li>
<li><code>inv.simp</code>:
    Inverse Simpson index.<br />
    It is the effective number of types that is obtained when
    the weighted arithmetic mean is used to quantify average
    proportional abundance of types in the dataset of interest.<br /></li>
<li><code>div</code>:
    true diversity, or the effective number of types.<br />
    It refers to the number of equally abundant types needed
    for the average proportional abundance of the types to
    equal that observed in the dataset of interest where all
    types may not be equally abundant.<br /></li>
</ul>
</li>
<li><code>devpars</code> <em>(<code>ns</code>)</em>:
    The parameters for the plotting device.<br /><ul>
<li><code>width</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>1000</code></em>. <br />
    The width of the device</li>
<li><code>height</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>1000</code></em>. <br />
    The height of the device</li>
<li><code>res</code> <em>(<code>type=int</code>)</em>: <em>Default: <code>100</code></em>. <br />
    The resolution of the device</li>
</ul>
</li>
<li><code>cases</code> <em>(<code>type=json</code>)</em>: <em>Default: <code>{}</code></em>. <br />
    If you have multiple cases, you can use this
    argument to specify them. The keys will be the names of the
    cases. The values will be passed to the corresponding arguments
    above. If any of these arguments are not specified, the values
    in <code>envs.sample_diversity</code> will be used. If NO cases are
    specified, the default case will be added, with the name
    <code>DEFAULT</code>.<br /></li>
</ul>
</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<h4 id="cluster-size">Cluster size<a class="headerlink" href="#cluster-size" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">[TCRClusterStats.envs.cluster_size]</span>
<span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Sample&quot;</span>
</code></pre></div>
<p><img alt="Cluster_size" src="../latest/processes/images/TCRClusteringStats_cluster_size.png" width="80%" /></p>
<h4 id="shared-clusters">Shared clusters<a class="headerlink" href="#shared-clusters" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">[TCRClusterStats.envs.shared_clusters]</span>
<span class="n">numbers_on_heatmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">heatmap_meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span>
</code></pre></div>
<p><img alt="Shared_clusters" src="../latest/processes/images/TCRClusteringStats_shared_clusters.png" width="80%" /></p>
<h4 id="sample-diversity">Sample diversity<a class="headerlink" href="#sample-diversity" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">[TCRClusterStats.envs.sample_diversity]</span>
<span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;gini&quot;</span>
</code></pre></div>
<p><img alt="Sample_diversity" src="../latest/processes/images/TCRClusteringStats_sample_diversity.png" width="80%" /></p>
<p>Compared to the sample diversity using TCR clones:<br /></p>
<p><img alt="Sample_diversity" src="../latest/processes/images/Immunarch_sample_diversity.png" width="80%" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../TCRClustering/" class="btn btn-neutral float-left" title="TCRClustering"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../IntegratingTCRClusters/" class="btn btn-neutral float-right" title="IntegratingTCRClusters">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div class="footer-notes">
    
    Version: <div id="mike-versions"></div>
    <div class="footer-sep"></div>
    <a href="https://github.com/pwwang/immunopipe" title="Open repository in GitHub">Github Repo</a>
    <div class="footer-sep"></div>Built with <a href="https://www.mkdocs.org/">MkDocs</a> using theme <a href="https://github.com/pwwang/mkdocs-rtd">mkdocs-rtd</a>.
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../TCRClustering/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../IntegratingTCRClusters/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script src="../../js/version-select.js"></script>
      <script src="../../assets/script.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
